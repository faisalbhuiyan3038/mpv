# To connect to SVP application, not needed otherwise
input-ipc-server=mpvpipe

osd-font="Cocon-Regular"

#============================================================================================================================================================================#
##########Video##########
#hwdec=auto-copy                        # hardware video decoder
hwdec=d3d11va-copy
hwdec-codecs=all
vo=gpu
# D3D11 renderer (default) is required for the HDR playback
#gpu-api=d3d11
# use VULKAN API if you have problems with the default d3d11 renderer
#gpu-api=vulkan
gpu-api=auto
gpu-context=auto
d3d11-adapter=Intel
# high quality video output, require rather fast video card
# profile=gpu-hq
profile=fast
vlang=en,eng                            # Sets the video language

#Set the fps as the max. of your monitor Hz (only useful and needed with "interpolation=yes)
#If you use any "spdif" setting, use "display-tempo" instead (or don't use any interpolation)
# video-sync=display-resample

# add sharpening filter
# vf-add=sharpen
# sharpen-opts=amount=5

# "ReClock" replacement
#video-sync=display-resample
#video-sync-max-video-change=5

#Gamma correction for a PC screen (sRGB)
#Not needed for a TV screen (Rec.709/Rec.2020)
#Sets the output to sRGB with approximately 2.2 power law gamma
# target-trc=srgb
# gamma-factor=1.1

# #Activate interpolation
# interpolation=yes

# #Interpolation method [look at the table below]
# tscale=mitchell
# # moothness/Sharpness	Interpolation
# # Sharpest (Default)	oversample
# # Sharper	linear
# # Sharp	catmull_rom
# # Smooth	mitchell
# # Smoother	gaussian
# # Smoothest	bicubic

# #Trade smoothness for performance (disables dynamic updates)
# interpolation-preserve=yes

#for interpolation using mvtools: link to original thread: https://www.reddit.com/r/mpv/comments/oke3aa/guide_how_to_get_motion_interpolation_soap_opera/
# vf=vapoursynth="C:\Users\Admin\AppData\Roaming\mpv\scripts\mvtools.vpy":buffered-frames=4:concurrent-frames=32

#I have an iGPU laptop edition:
#scale=spline36
#dscale=mitchell
#cscale=mitchell

# # I have a Toaster (crappy PC) edition:
scale=bilinear # Set spline16 if possible.
dscale=mitchell
cscale=bilinear

#============================================================================================================================================================================#
##########Audio##########
volume-max=200                          # maximum volume in %, everything above 100 results in amplification
volume=30
audio-pitch-correction=yes
audio-channels=auto
audio-pitch-correction=yes
#audio-normalize-downmix=yes
# fixes audio desync
hr-seek-framedrop=no

#"auto-safe" only sends channels that your active audio device can handle, which can cause issues for an ARC/eARC setup (uses TV instead of soundbar) 
#"auto" sends every channels as they're, which works for an eARC/ARC setup but also can cause issues if your sound device doesn't support certain channel setups
#An alternative is to set up a whitelist for supported channels
audio-channels=auto-safe


##########NormalizeAudio##########
# af=lavfi=[amix=6.3]
# af=lavfi=[dynaudnorm=f=200:g=15:p=0.5:m=10:r=1] # claude ai suggested
# --af=dynaudnorm=f=150:g=15:m=100:n=500  # chatgpt suggested
# af=dynaudnorm=f=32:g=15:p=0.5:m=11:r=0.25 #potplayer cloned using claude
# boost speech volume
af=@normalize:speechnorm=e=10:r=0.0005:l=1
# loudnorm works well too, but uses more CPU
#af=@normalize:loudnorm=I=-10

#============================================================================================================================================================================#
##########General##########
cache=yes                               # uses a large seekable RAM cache even for local input.
cache-secs=300
border=no
osd-bar=no
osc=no
save-position-on-quit=yes
snap-window=yes                         # Enables windows snapping for Windows 10, 11
priority=high                           # Makes PC prioritize MPV for allocating resources
#ontop=yes                              # Keeps mpv in focus when switching to another window
force-seekable=yes
#log-file=mpv.log                      # To debug mpv issues
geometry=50%:50%

#============================================================================================================================================================================#
##########Subtitles##########
#Some settings fixing VOB/PGS subtitles (creating blur & changing yellow subs to gray)
sub-gauss=1.0
sub-gray=yes

sub-use-margins=yes
alang=en,eng                            # default audio languages
embeddedfonts=yes                       # use embedded fonts for SSA/ASS subs
slang=en,eng,English                            # default subtitles languages                     # use yellow sub color (remove this line to make subtitles the default white colour)
sub-file-paths-append='Subs/${filename/no-ext}'      # search for external subs in these relative subdirectories
sub-file-paths-append='Subs/${filename}'
sub-file-paths-append='subs/${filename/no-ext}'
sub-file-paths-append='subs/${filename}'
sub-file-paths-append=ASS
sub-file-paths-append=Ass
sub-file-paths-append=SRT
sub-file-paths-append=Srt
sub-file-paths-append=Sub
sub-file-paths-append=Subs
sub-file-paths-append=Subtitles
sub-file-paths-append=ass
sub-file-paths-append=srt
sub-file-paths-append=sub
sub-file-paths-append=subs
sub-file-paths-append=subtitles
sub-fix-timing=no                       # do not try to fix gaps (which might make it worse in some cases)

sub-blur=0.5
sub-scale=0.8
sub-color='#d6ffffff'
sub-shadow-offset=5.0
sub-font=Atkinson Hyperlegible
sub-shadow-color='#ff000000'
sub-border-size=1.5
sub-shadow-offset=2
#sub-back-color="#aa000000" # little transperancy black
#sub-border-color="#ff0a0a0a" # little black transperancy
sub-auto=all

sub-ass-override=force
sub-filter-sdh=yes

sub-scale-with-window=yes
# sub-font-size=40
sub-auto=fuzzy                      # Load additional subtitle files containing the video filename
demuxer-mkv-subtitle-preroll=yes    # Try to correctly show embedded subs when seeking

##Subtitle Background
sub-ass-override=force
sub-ass-force-style=BackColour=CC000000,BorderStyle=4,Outline=0,Shadow=0
sub-color='#FFFFFF'
sub-font-size=40
sub-use-margins=yes
sub-margin-y=30
sub-ass-force-margins=yes
sub-scale=1.0
sub-ass-style-override=force

# Force box style specifically
sub-ass-styles-override=yes
sub-ass-style=Default,BoxStyle=3,BackColour=CC000000,MarginV=30

#============================================================================================================================================================================#
##########load glsl shaders##########
# sigmoid-upscaling=no
glsl-shader="~~/shaders/apack/vibrance.35.hk"
#glsl-shader="~~/shaders/apack/deContrast.glsl"
glsl-shader="~~/shaders/CAS-scaled.glsl" 
#glsl-shader="~~/shaders/apack/sCurve.hk.glsl" 
--gpu-shader-cache-dir="D:\Temp" # ! set the shader cache to a directory with write access

